- name: Set authorized key taken from file
  vars:
    ssh_key_location: "{{ lookup('env','SSH_PUB_KEY') }}"
  ansible.posix.authorized_key:
    user: root
    state: present
    key: "{{ lookup('file', ssh_key_location) }}"

- name: Create storage directories
  ansible.builtin.file:
    path: '/home/qarax/storage/{{ item.storage_type }}'
    state: directory
  loop:
    - { storage_type: local }
    - { storage_type: shared }
